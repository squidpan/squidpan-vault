---
type:
  - "youtube"
URL: "https://www.youtube.com/watch?v=2gCr4VvbL_4"
URL_Retrieved: 2025-07-05
URL_Published: 2024-08-01
URL_Title: "250 Virtual Machines on a Proxmox Mini PC"
URL_Description: "This was such a fun experiment to see how many virtual machines you can realistically get on a modern mini PC with 96 GB of memory. I tested using the Geekom..."
Youtube_Channel_Name: "VirtualizationHowto"
Youtube_Channel_URL:
Youtube_ID: "2gCr4VvbL_4"
Youtube_Duration: "14:36"
speakers:
tags:
  - "youtube"
  - "clippings"
category:
  - "[[Clippings]]"
---

# 250 Virtual Machines on a Proxmox Mini PC

![250 Virtual Machines on a Proxmox Mini PC](https://www.youtube.com/embed/2gCr4VvbL_4)

> [!summary]- Description
> This was such a fun experiment to see how many virtual machines you can realistically get on a modern mini PC with 96 GB of memory. I tested using the Geekom AE7 with the Ryzen 7840HS processor with 16 threads and 96 GB of DDR5 memory. See just how far I was able to get running VMs on a mini PC! Did I reach 250?
> 
> Written blog post on the quest to run 250 VMs! https://www.virtualizationhowto.com/2...
> 
> Proxmox Kernel Samepage Merging (KSM) - https://pve.proxmox.com/wiki/Dynamic_...
> 
> Check out Tek2Cloud, another project I am working on: https://tek2cloud.com
> 
> ★ Subscribe to the channel:    / @virtualizationhowto  
> ★ My blog:  https://www.virtualizationhowto.com
> ★ Twitter:   / vspinmaster  
> ★ LinkedIn:   / brandon-lee-vht  
> ★ Github: https://github.com/brandonleegit
> ★ Facebook:   / 100092747277326  
> ★ Discord:   / discord  
> ★ Pinterest:   / brandonleevht  
> 
> Introduction - 0:00 
> Overview of how Mini PCs are great for home lab - 0:32
> Mini PC I am using for the test - 1:00
> Overview of the VM template in Proxmox - 1:47
> Starting with 50 virtual machines - 2:46
> 80, 100, 115, 125 virtual machines - 3:06
> Talking about RAM usage - 3:21
> How Proxmox handles memory overcommit - 3:43
> Kernel Samepage Merging deduplicates memory pages - 4:05
> 140, 150, 180 virtual machines - 5:13
> Going for broke - 200 VMs and then 250! - 5:29
> Looking at 200 VMs in Proxmox - 5:50
> Talking more about memory management in Proxmox 6:00
> Upping the number of VMs and IO delay - 6:10
> 210 VMs running - 8:00
> The VMs are responsive and able to do work, running stress utility - 8:27
> Cloning more! 9:11
> Reaching 250 VMs! 10:15
> 99% memory 99% CPU - 10:29
> Launching stress utilities in VMs - 10:48
> Discussing random VMs powered off - 11:39
> Looking at VMs that are powered off - 12:16
> Discussing idle virtual machines - 13:03
> Concluding comments - 14:06

> [!transcript]- Transcript (Youtube)
> 0:00 I set about finding out just how many 0:02 workloads I could run on one of today's 0:04 modern mini PCS especially those with 0:07 ddr5 memory that can be upgraded to 96 0:10 gigs of memory how many VMS can you run 0:13 on this setup 50 100 0:17 150 or maybe more well that is what 0:20 we're going to find out so stick around 0:25 \[Music\] 0:32 today's mini PCS are making great H lab 0:35 platforms for many that are looking to 0:37 run a home laab with a few virtual 0:39 machines and containers however can 0:42 these little mini PCS run in the 0:44 neighborhood of the workloads that can 0:45 be run on an Enterprise server well I 0:48 wanted to find out just what kind of 0:50 density that you could actually achieve 0:52 with a Mini PC and I'm talking about a 0:55 single Mini PC not a cluster of mini PCS 1:00 so the Mini PC that I'm using for this 1:02 test is the geekam ae7 which I recently 1:04 reviewed and it's equipped with the 1:06 ryzen 9 7940 HS processor and a whopping 1:11 96 gigs of ddr5 RAM that I was able to 1:14 purchase during the recent Prime Day 1:16 cell and that's two 48 GB modules is a 1:21 compact little mini PC that I thought 1:23 would make a great test bed for seeing 1:25 how many virtual machines I could 1:27 actually pack into this little package I 1:30 installed a Samsung Evo 9980 Pro 2 tbte 1:34 nvme drive for housing the workloads and 1:36 then also proxmox V 8.2 is our 1:39 virtualization platform of choice for 1:42 this experiment and of course the 96 1:44 gigs of memory that I recently installed 1:47 before we started cloning up virtual 1:48 machines I created the virtual machine 1:51 template that would be used for the test 1:54 my Bas VM is an auntu server 2204 1:57 installation and it's configured with 1:59 two gigs of RAM and two vcpus now you 2:03 may be saying why two gigs of memory is 2:05 I could have achieved more density 2:07 cutting that in half well I wanted to 2:10 have something that I would install in 2:12 the home lab a lot of Linux VMS that I 2:15 spent up are between two and 4 gigs of 2:18 memory as I find that one gig is a bit 2:21 anemic for most things that I want to do 2:24 so I settled on two gigs for this test 2:27 in the home lab I updated the system 2:30 install Docker just in case I wanted to 2:32 play around with some containers later 2:33 on and I also installed the Linux stress 2:36 utility along with the 2:39 stii user interface which is a great 2:42 utility for running the stress utility 2:44 with a nice gooey to kick things off I 2:47 decided to start with a modest number of 2:50 virtual machines so I started with 50 2:52 virtual machines using the bulk start 2:54 operation proxmox I powered them all up 2:57 without a hitch the system handled 50 3:00 VMS without any problem so I decided to 3:03 start pushing the envelope next I ramped 3:07 up to 80 virtual machines still 3:09 breathing room then we took it up to 100 3:14 115 and then eventually 125 VMS 3:19 surprisingly the RAM usage was still 3:21 under control hovering around 78% even 3:25 with the 125 VMS running and you may ask 3:29 how is this type of overcommit with 3:31 proxmox memory possible well like most 3:34 modern hypervisors proxmox has a lot of 3:36 tricks up its sleeves for handling 3:39 memory overcommit including ballooning 3:41 and other techniques there's also 3:43 another really neat memory management 3:45 tool that is available in proxmox it's 3:48 called dynamic memory management and 3:50 this says something really cool if you 3:52 have virtual machines running on your 3:54 proxmox post that are of the same OS and 3:57 that is the case in my configuration 4:00 using at least 80% of your physical 4:02 memory on the host it says wait a few 4:04 minutes and this ASM process or kernel 4:08 same page merging is a feature that 4:11 scans the memory of all the virtual 4:13 machines running on a single host 4:15 looking for duplication and 4:17 consolidating if especially if you're in 4:19 the same case that I am cloning 4:22 identical virtual machines with the same 4:24 amount of memory there is obviously 4:26 going to be room for duplication and 4:29 consolid Val ating so with this KSM 4:31 process according to this official 4:33 documentation from proxmox it's able to 4:35 improve virtual machine density by as 4:37 much as 300% without impacting 4:40 performance and I certainly noticed that 4:43 I could wait just a little bit when the 4:44 memory would Peak up into the 90s 4:46 something per range after a few minutes 4:49 the memory pressure would back down to 4:52 let's say 78% so I was able to see this 4:56 KSM process as part of dynamic memory 4:59 man Management in operation results were 5:01 significant especially for density 5:03 running the same types of operating 5:06 systems so it allows this level of 5:08 overcommit to be possible with running 5:11 this number of virtual machines with 5:13 proxmox efficient memory management we 5:15 went even further went up to 140 150 and 5:20 then 180 virtual machines at this point 5:23 the memory usage peaked at 93% but the 5:27 system was still stable now for the 5:30 grand finale I wanted to see if I could 5:32 go for 200 virtual machines and then 250 5:37 was that even possible guys I want to 5:39 show you this this is so cool and I 5:42 think it's just a testament to what you 5:44 can do with modern Mini PC Hardware as 5:47 well as something like proxmox so I made 5:51 it all the way to 200 virtual machines 5:55 running inside of proxmox ve when I push 5:58 the memory up and it gets up to like 93% 6:01 memory you know I think okay I'm done 6:04 there's no Headroom left on the box but 6:07 if I let the Box sit for a while the 6:10 memory actually compresses down as you 6:12 guys can see as we've just been sitting 6:14 here talking the memory usage is going 6:17 down 200 virtual machines on 96 gigs of 6:20 memory and I think we've still got a 6:22 headro and so I want to continue to push 6:25 this box higher and higher let's see if 6:27 we can actually crash the box if that's 6:30 possible so I'm going to continue to 6:35 \[Music\] 6:44 clone hey so that is another 10 virtual 6:48 machines and it's laboring a bit to 6:51 clone these virtual machines out I know 6:53 we are seeing some IO contention as 6:56 every clone process I see the io delay 6:58 that is jumping up almost 100% then 7:01 it'll bounce back down as it finishes 7:03 virtual machines but amazingly the 7:06 memory is going down now once we power 7:10 the new virtual machines back on we're 7:11 going to be able to push this back up 7:13 but amazingly again it's just seems to 7:16 be hovering around that 78 to 82% Mark 7:20 that kernel same page merging is running 7:24 and it's duplicating that memory and 7:26 that's why we were seeing that memory 7:28 usage actually drop dropping with this 7:30 number of virtual machines let's see if 7:31 our clone process has finished it has so 7:35 let's see if we can get these additional 7:39 10 virtual machines up and running which 7:41 with the memory drained back down I 7:43 think it's going to happen so let's just 7:46 start these puppies up see what happens 7:50 and see how long it takes it to spin 7:52 these up 8:01 okay guys as you can see 8:04 210 virtual machines running on this 8:08 Mini PC with the AMD ryzen 9 7840 HS 8:14 processor 96 gigs of memory and those 8:18 last 10 virtual machines was able to 8:20 push it up to 88.8 5% memory and I want 8:24 to show you guys just so you can see 8:28 these VMS are are responsive I can log 8:31 into the virtual machines I can just to 8:34 show you guys this I can actually 8:36 initiate a stress test so we're going to 8:38 let that one fire up I'm just randomly 8:41 picking virtual machines but I I just 8:44 want you guys to see that we are not 8:46 just simply spinning up virtual machines 8:49 that basically you can't do anything 8:51 with these are virtual machines that are 8:54 responsive they are able to run 8:56 workloads they are able to do anything 9:00 you want so I mean this is amazing to me 9:03 uh with this experiment 89% memory so I 9:06 think we've got a lot of Headroom here 9:09 let's just keep going for the moon here 9:11 um and I am wondering can we possibly 9:16 get to 250 virtual machines I really 9:21 wonder I am very optimistic honestly so 9:26 let's keep going 9:28 \[Music\] 9:43 \[Music\] 9:49 \[Music\] 10:11 \[Music\] 10:15 oh my goodness it made it 250 virtual 10:20 machines and the Box still 10:23 looks to be handling it 99% memory 10:30 all right let's see if we've got 10:31 responsive virtual machines let's go to 10:35 console let's see what happens 10:37 here all right so far so good let's see 10:41 if we can add to its stress no fear 98% 10:46 memory as you guys can see I'm launching 10:48 some stress utilities opening the 10:52 console let log in 10:59 all right let's get a couple of stresses 11:03 going as you guys can see that we're 11:05 we're not taking it easy on this box 99% 11:09 memory got 62% CPU this is incredible it 11:14 really 11:15 is I never expected to be able to get to 11:20 this point in in a stable way hey let's 11:24 we got three VMS that are running the 11:26 stress utility on top of the fact that 11:30 we have got 11:33 250 virtual machines guys this is 11:38 amazing finally on hitting the 250 VM 11:41 Mark I pushed the CPU to 94% and the RAM 11:45 usage to 99% even with this massive load 11:49 the system remains stable all in one 11:51 thing I did notice was that random 11:53 virtual machines were powered off during 11:56 this last batch tolling around 5 VMS 11:58 each time and I could power these back 12:00 on but another batch of around five 12:03 would be powered off so I think I hit a 12:05 limit in proxmox where it started to 12:07 decide which virtual machines and which 12:10 resources that it needed to power down 12:12 to reclaim memory for the system itself 12:16 there are virtual machines that I'm 12:18 noticing that are getting powered off uh 12:21 so I can go through and I can say 12:23 restart restart or not restart I can go 12:27 through and I can say start but it's 12:29 it's only a few it's we're talking three 12:33 four virtual machines so as I'm buzzing 12:37 through there's one that is powered off 12:41 so I think what proxmox may be doing 12:44 just to give the hypervisor a little bit 12:46 of breathing room to do what it needs to 12:47 do so you can see here guys swap usage 12:51 100% CPU usage basically 100% RAM usage 12:56 100% And we have essentially a stable 13:00 server incredible now I know I'm going 13:03 to have some haters in the comments on 13:05 this video that will say that the 13:06 virtual machines for the most part were 13:07 not doing anything and this isn't a 13:10 scientific test and they would be 13:13 correct however that was my intention 13:16 and why do I say that well most home 13:19 Labs contain workloads that are 13:20 basically sitting in an idle condition 13:22 meaning they aren't doing any work in 13:25 the home lab however I wanted to 13:27 simulate the need to spin up dozens or 13:30 even hundreds of VMS for different types 13:33 of labs or scenarios that you want to 13:35 play around with in the home lab and 13:37 absolutely a Mini PC can do this with 13:40 that many workloads and it's incredible 13:43 to me to see that in 2024 we have modern 13:47 mini PCS and Hardware that can handle 13:49 such a massive number of virtual 13:52 machines so if you are wondering if a 13:54 Mini PC can replace your larger home lab 13:57 servers that maybe pulling 1,000 watts 14:00 in your server rack the answer is a 14:03 resounding yes most likely it can well 14:06 thanks for watching if you found this 14:08 video helpful or interesting don't 14:10 forget to like subscribe and hit that 14:13 Bell icon for more awesome content from 14:16 virtualization howto well stay safe out 14:19 there keep on home labbing and I will 14:21 see you guys in the next video 14:26 \[Music\]